<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload Lecture Notes</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body class="bg-gray-100 p-6">
    <div class="max-w-2xl mx-auto bg-white p-6 rounded-lg shadow-lg">
        <h2 class="text-2xl font-semibold mb-4 text-green-600">Contribute Lecture Note</h2>
        <form id="lectureForm" class="space-y-4">
            <div>
                <label for="upload_token" class="block text-sm font-medium text-gray-700">Upload Token <span class="text-red-600">*</span></label>
                <input type="text" id="upload_token" name="upload_token" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
            </div>
            <div>
                <label for="fcourse" class="block text-sm font-medium text-gray-700">Course <span class="text-red-600">*</span></label>
                <select id="fcourse" name="course" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                    <option value="">Select Course</option>
                </select>
            </div>
            <div>
                <label for="course_title" class="block text-sm font-medium text-gray-700">Course Title <span class="text-red-600">*</span></label>
                <input type="text" id="course_title" name="course_title" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
            </div>            
            <div>
                <label for="pdf" class="block text-sm font-medium text-gray-700">PDF Link <span class="text-red-600">*</span></label>
                <input type="file" id="fpdf" name="pdf" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
            </div>
            <div>
                <label for="info" class="block text-sm font-medium text-gray-700">Info</label>
                <input type="text" id="finfo" name="info" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
            </div>
            <div>
                <label for="lecturer" class="block text-sm font-medium text-gray-700">Lecturer</label>
                <input type="text" id="flecturer" name="lecturer" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
            </div>
            <div>
                <label for="date" class="block text-sm font-medium text-gray-700">Date</label>
                <input type="date" id="fdate" name="date" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500" value="">
            </div>
            <div>
                <label for="uni" class="block text-sm font-medium text-gray-700">University <span class="text-red-600">*</span></label>
                <select id="funi" name="uni" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                    <option value="">Select University</option>
                </select>
            </div>
            <div>
                <label for="level" class="block text-sm font-medium text-gray-700">Level <span class="text-red-600">*</span></label>
                <select id="flevel" name="level" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                    <option value="">Select Level</option>
                </select>
            </div>
            <div>
                <label for="dpt" class="block text-sm font-medium text-gray-700">Department <span class="text-red-600">*</span></label>
                <select id="fdpt" name="dpt" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500">
                    <option value="">Select Department</option>
                </select>
            </div>
            <div>
                <button type="submit" class="px-4 py-2 bg-blue-500 text-white rounded-md shadow-sm hover:bg-blue-700">Submit</button>
            </div>
        </form>
        <div id="result" class="hidden mt-4 text-green-600 font-semibold">Form submitted successfully!</div>
    </div>

    <script>
        // Populate dropdowns with sample data
        const uni_json = [{ acronym: "ABU", name: "Ahmadu Bello University" }, { acronym: "UNILAG", name: "University of Lagos" }, { acronym: "UNIBEN", name: "University of Benin" }];
        const levels_json = [{ page: "100", level: "100 Level" }, { page: "200", level: "200 Level" }];
        const dpts_json = [{ code: "CSC", name: "Computer Science" }, { code: "MTH", name: "Mathematics" }];
        const courses_json = [
            { code: "CSC101", title: "Introduction to Computer Science" },
            { code: "MTH201", title: "Advanced Calculus" },
            { code: "PHY102", title: "Physics for Engineers" }
        ];

        $('#fdate').val(new Date().toISOString().split('T')[0]);
        uni_json.forEach(u => $('#funi').append(`<option value="${u.acronym}">${u.name}</option>`));
        levels_json.forEach(l => $('#flevel').append(`<option value="${l.page}">${l.level}</option>`));
        dpts_json.forEach(d => $('#fdpt').append(`<option value="${d.code}">${d.name}</option>`));
        $('#fcourse').on('change', function () {
            const selectedCourse = courses_json.find(c => c.code === $(this).val());
            $('#course_title').val(selectedCourse ? selectedCourse.title : '');
        });


        // Submit form
        $('#lectureForm').on('submit', function (e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            $.ajax({
                url: 'https://your-backend-api-url.com/submit-notes',
                type: 'POST',
                data: formData,
                processData: false,
                contentType: false,
                success: function () {
                    $('#result').removeClass('hidden').text('Form submitted successfully!');
                },
                error: function () {
                    $('#result').removeClass('hidden').addClass('text-red-600').text('Submission failed. Please try again.');
                }
            });
        });
    </script>
</body>
</html>
